(this["webpackJsonptut-tut"]=this["webpackJsonptut-tut"]||[]).push([[0],{15:function(e,t,n){},36:function(e,t,n){e.exports=n(64)},41:function(e,t,n){},42:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(33),o=n.n(s),c=(n(41),n(2)),i=n(3),l=n(5),u=n(4),m=(n(42),n(6)),h=n.n(m),p=n(66),d=n(10),f=n(12),g=n(1),b=function e(){Object(c.a)(this,e),this.users=[],this.articles=[],this.comments=[]};Object(g.h)(b,{users:g.m,articles:g.m,comments:g.m});var v=new b,E=n(16),O=n(11),S=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(O.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),0!==a.state.content.length&&a.props.user.id===a.props.comment.user_id&&h.a.patch("http://localhost:3001/comments/".concat(a.props.comment.id),{comment:{content:a.state.content}}).then((function(e){console.log(e)}))},a.state={content:e.comment.content},a}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"content",name:"content",value:this.state.content,onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Submit")))}}]),n}(a.Component),j=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).getUser=function(){h.a.get("http://localhost:3001/users/".concat(e.props.comment.user_id)).then((function(t){e.setState({currentUser:t.data})}))},e.state={currentUser:[]},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Comments"},r.a.createElement("h4",null,"".concat(this.state.currentUser.email," says:")),r.a.createElement("p",null,this.props.comment.content),r.a.createElement("span",{className:"Timestamp"},this.props.comment.created_at),this.props.user.id===this.props.comment.user_id?r.a.createElement("button",{onClick:function(){return e.props.deleteComment(e.props.comment)}},"Delete Comment"):null,this.state.currentUser.id===this.props.comment.user_id?r.a.createElement(S,{user:this.props.user,comment:this.props.comment,article:this.props.article}):null)}}]),n}(a.Component),C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).handleChange=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),0!==e.state.content.length&&(h.a.post("http://localhost:3001/comments",{comment:{user_id:e.props.user.id,content:e.state.content,article_id:e.props.article.id}}).then((function(t){console.log(t),e.props.getNewComments(t.data.comment)})),e.setState({content:""}))},e.state={content:""},e}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"content",name:"content",placeholder:"Comment Content",value:this.state.content,onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Submit")))}}]),n}(a.Component),y=(n(15),Object(f.a)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).populateComments=function(){h.a.get("http://localhost:3001/articles/".concat(e.props.article.id)).then((function(e){v.comments=e.data.comments.reverse()}))},e.getNewComments=function(e){v.comments=[e].concat(Object(E.a)(v.comments))},e.deleteComment=function(t){e.props.user.id===t.user_id&&(console.log(t),v.comments=Object(E.a)(v.comments.filter((function(e){return t.id!==e.id}))),fetch("http://localhost:3001/comments/".concat(t.id),{method:"DELETE"}).then((function(e){return console.log(e)})))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.populateComments()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,"LOGGED_IN"===this.props.loggedInStatus?r.a.createElement(C,{user:this.props.user,article:this.props.article,getNewComments:this.getNewComments}):null,v.comments.map((function(t){return r.a.createElement(j,{user:e.props.user,key:t.id,comment:t,getNewComments:e.getNewComments,deleteComment:e.deleteComment})})))}}]),n}(a.Component))),w=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).getUser=function(){h.a.get("http://localhost:3001/users/".concat(e.props.article.user_id)).then((function(t){e.setState({currentUser:t.data})}))},e.truncate=function(e,t){return e.split(" ").splice(0,t).join(" ")+"..."},e.state={currentUser:[]},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"post-grid-container"},r.a.createElement("div",{onClick:function(){return e.props.clickHandler(e.props.article)}},r.a.createElement("p",{className:"Title"},"Title: ",this.props.article.title),r.a.createElement("p",{className:"URL"},"Source: ",this.props.article.url),this.props.individualPost?r.a.createElement("p",{className:"Description"},"Descripton: ",this.props.article.description):r.a.createElement("p",{className:"Description"},"Description: ",this.truncate(this.props.article.description,25))),r.a.createElement("div",{className:"Sourcefinder"},"Sourcefinder: ",this.state.currentUser.email),r.a.createElement("div",{className:"Timestamp"}," ",this.props.article.created_at," "),this.props.individualPost?r.a.createElement(y,{user:this.props.user,article:this.props.article,loggedInStatus:this.props.loggedInStatus}):null)}}]),n}(a.Component),N=Object(f.a)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,v.articles.filter((function(e){return!1!==e.show})).map((function(t){return r.a.createElement("div",{key:t.id},r.a.createElement(w,{article:t,clickHandler:e.props.openArticle,takeMeHome:e.props.takeMeHome,loggedInStatus:e.props.loggedInStatus}))})))}}]),n}(a.Component)),k=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).handleChange=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),0!==e.state.title.length&&0!==e.state.url.length&&0!==e.state.desc.length&&(h.a.post("http://localhost:3001/articles",{article:{user_id:e.props.user.id,title:e.state.title,url:e.state.url,desc:e.state.desc}}).then((function(t){console.log(t),e.props.getNewArticles(t.data.article)})),e.setState({title:"",url:"",desc:""}))},e.state={title:"",url:"",desc:""},e}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"create-article-grid-container"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{className:"t_title",type:"title",name:"title",placeholder:"Tutorial Title",value:this.state.title,onChange:this.handleChange}),r.a.createElement("input",{className:"t_url",type:"url",name:"url",placeholder:"Tutorial URL",value:this.state.url,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("br",null),r.a.createElement("textarea",{className:"t_desc",name:"desc",value:this.state.desc,onChange:this.handleChange,placeholder:"Tutorial Description"})),r.a.createElement("button",{className:"t_submit",type:"submit"},"Submit")))}}]),n}(a.Component),I=Object(f.a)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).handleChange=function(t){e.setState({content:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),t.target.filter.value.length>0&&e.setState({filters:[].concat(Object(E.a)(e.state.filters),[t.target.filter.value.toLowerCase()]),content:""})},e.filterArticles=function(t){t.forEach((function(t){e.state.filters.forEach((function(e){t.title.toLowerCase().includes(e)||(t.show=!1)}))}))},e.clearFilter=function(){e.setState({filters:[]}),v.articles.forEach((function(e){return e.show=!0}))},e.removeKeyword=function(t){e.setState({filters:Object(E.a)(e.state.filters.filter((function(e){return e!==t})))}),e.clearFilter(),e.filterArticles(v.articles)},e.state={content:"",filters:[]},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){console.log(this.state.filters)}},{key:"componentDidUpdate",value:function(){this.filterArticles(v.articles)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Filter"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"filter",name:"filter",placeholder:"Type a Keyword",value:this.state.content,onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Add a Filter Keyword"),r.a.createElement("button",{onClick:this.clearFilter},"Clear Filter")),this.state.filters.map((function(t){return r.a.createElement("button",{key:t,onClick:function(){return e.removeKeyword(t)}},t)})))}}]),n}(a.Component)),_=Object(f.a)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).getNewArticles=function(e){v.articles=[e].concat(Object(E.a)(v.articles))},e}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"Articles"},"LOGGED_IN"===this.props.loggedInStatus?r.a.createElement(k,{user:this.props.user,history:this.props.pushToRoute,getNewArticles:this.getNewArticles}):null,r.a.createElement(I,null),r.a.createElement(N,{loggedInStatus:this.props.loggedInStatus,user:this.props.user,openArticle:this.props.openArticle,takeMeHome:this.props.takeMeHome}))}}]),n}(r.a.Component)),D=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),h.a.post("http://localhost:3001/registrations",{user:{email:a.state.email,password:a.state.password,password_confirmation:a.state.password_confirmation}},{withCredentials:!0}).then((function(e){"created"===e.data.status&&a.props.handleSuccessfulAuth(e.data)})).catch((function(e){a.setState({registrationError:e})}))},a.handleChange=function(e){a.setState(Object(O.a)({},e.target.name,e.target.value))},a.state={email:"",password:"",password_confirmation:"",registrationError:""},a}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{className:"form-input",type:"email",name:"email",placeholder:"Email Address",value:this.state.email,onChange:this.handleChange,required:!0}),r.a.createElement("input",{className:"form-input",type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange,required:!0}),r.a.createElement("input",{className:"form-input",type:"password",name:"password_confirmation",placeholder:"Password Confirmation",value:this.state.password_confirmation,onChange:this.handleChange,required:!0}),r.a.createElement("button",{type:"submit"},"Register")))}}]),n}(a.Component),A=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),h.a.post("http://localhost:3001/sessions ",{user:{email:a.state.email,password:a.state.password}},{withCredentials:!0}).then((function(e){console.log("res from Login: ",e),e.data.logged_in&&a.props.handleSuccessfulAuth(e.data)})).catch((function(e){console.log("Login error: ",e)})),a.fieldReset()},a.handleChange=function(e){a.setState(Object(O.a)({},e.target.name,e.target.value))},a.fieldReset=function(){a.setState({email:"",password:"",password_confirmation:""})},a.state={email:"",password:"",loginError:""},a}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"email",name:"email",placeholder:"Email Address",value:this.state.email,onChange:this.handleChange,required:!0}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange,required:!0}),r.a.createElement("button",{type:"submit"},"Login")))}}]),n}(a.Component),L=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"nav"},"LOGGED_IN"===this.props.loggedInStatus?r.a.createElement("div",null,r.a.createElement("span",null,this.props.user.email),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.props.handleLogout},"Log Out"))):r.a.createElement("div",null,r.a.createElement(D,{className:"registration",handleSuccessfulAuth:this.props.handleSuccessfulAuth,user:this.props.user}),r.a.createElement(A,{className:"login",handleSuccessfulAuth:this.props.handleSuccessfulAuth,user:this.props.user})))}}]),n}(a.Component),G=(n(59),Object(d.a)()),T=Object(f.a)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleLogin=function(e){a.setState({loggedInStatus:"LOGGED_IN",user:e.user})},a.handleLogout=function(){a.setState({loggedInStatus:"NOT_LOGGED_IN",user:{}}),h.a.delete("http://localhost:3001/logout",{withCredentials:!0}).catch((function(e){console.log("Errors: ",e)}))},a.populateStore=function(){h.a.get("http://localhost:3001/articles").then((function(e){v.articles=e.data}))},a.handleSuccessfulAuth=function(e){a.handleLogin(e)},a.checkLoginStatus=function(){h.a.get("http://localhost:3001/logged_in",{withCredentials:!0}).then((function(e){console.log(e),e.data.logged_in&&"NOT_LOGGED_IN"===a.state.loggedInStatus?a.setState({loggedInStatus:"LOGGED_IN",user:e.data.user}):e.data.loggedIn||"LOGGED_IN"!==a.state.loggedInStatus||a.setState({loggedInStatus:"NOT_LOGGED_IN",user:{}})})).catch((function(e){console.log("Check login error: ",e)}))},a.openArticle=function(e){a.setState({currentArticleID:e.id}),G.push("/articles/".concat(e.id))},a.takeMeHome=function(){G.push("/")},a.state={loggedInStatus:"NOT_LOGGED_IN",user:{},currentArticleID:0},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.checkLoginStatus(),this.populateStore()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"grid-container"},r.a.createElement(L,{loggedInStatus:this.state.loggedInStatus,handleSuccessfulAuth:this.handleSuccessfulAuth,handleLogout:this.handleLogout,user:this.state.user}),r.a.createElement(p.b,{history:G},r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(_,{loggedInStatus:e.state.loggedInStatus,user:e.state.user,history:G,openArticle:e.openArticle})}}),r.a.createElement(p.a,{exact:!0,path:"/articles/".concat(this.state.currentArticleID)},r.a.createElement(w,{loggedInStatus:this.state.loggedInStatus,user:this.state.user,article:v.articles.find((function(t){return t.id===e.state.currentArticleID})),individualPost:!0,clickHandler:this.takeMeHome})))))}}]),n}(a.Component)),U=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T,null))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=Object(d.a)();o.a.render(r.a.createElement(p.b,{history:M},r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.a09d2ed9.chunk.js.map